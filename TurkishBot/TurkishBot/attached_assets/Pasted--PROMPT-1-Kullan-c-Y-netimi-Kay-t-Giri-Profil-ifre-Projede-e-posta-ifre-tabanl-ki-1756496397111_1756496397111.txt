# ğŸŸ© PROMPT 1 â€” KullanÄ±cÄ± YÃ¶netimi (KayÄ±t, GiriÅŸ, Profil, Åifre)

Projede e-posta+ÅŸifre tabanlÄ± kimlik doÄŸrulama ve profil yÃ¶netimi ekle. AÅŸaÄŸÄ±daki adÄ±mlarÄ± uygula:

1) **VeritabanÄ± (PostgreSQL) tablolarÄ±**  
- `users` (id UUID PK default gen_random_uuid(), email UNIQUE NOT NULL, password_hash TEXT NOT NULL, first_name TEXT, last_name TEXT, phone TEXT, company TEXT, role TEXT CHECK (role IN ('BUYER','SELLER','ADMIN')) DEFAULT 'BUYER', avatar_url TEXT, notify_email BOOLEAN DEFAULT true, notify_inapp BOOLEAN DEFAULT true, created_at TIMESTAMPTZ DEFAULT now())  
- Ä°ndeks: `CREATE INDEX IF NOT EXISTS idx_users_email ON users(email);`

2) **Backend (Express / TypeScript)**  
- Ortak: `src/server/middleware/auth.ts` â†’ `authGuard` (Authorization: Bearer <JWT>) ve `roleGuard(...roles)` middleware.  
- Env: `JWT_SECRET` kullan; yoksa gÃ¼venli bir secret Ã¼ret.  
- Rotalar:  
  - `POST /api/auth/register` â†’ email, password, first_name, last_name, company al; bcrypt ile hashâ€™le; email unique kontrolÃ¼ yap.  
  - `POST /api/auth/login` â†’ email+password doÄŸrula; JWT Ã¼ret (user id, role).  
  - `GET /api/auth/me` â†’ tokenâ€™dan kullanÄ±cÄ±yÄ± dÃ¶ndÃ¼r.  
  - `PUT /api/profile` (auth) â†’ first_name, last_name, phone, company, avatar_url gÃ¼ncelle.  
  - `PUT /api/profile/password` (auth) â†’ current_password doÄŸrula, new_password ile bcrypt hash update.  
  - `PUT /api/profile/preferences` (auth) â†’ notify_email, notify_inapp gÃ¼ncelle.

3) **Frontend (React + TS)**  
- Sayfalar:  
  - `/login`, `/register` (TÃ¼rkÃ§e formlar, doÄŸrulamalar, TanStack Query ile istekler).  
  - `/settings` â†’ sekmeler: â€œProfil Bilgileriâ€, â€œÅifre DeÄŸiÅŸtirâ€, â€œBildirim AyarlarÄ±â€, â€œProfil FotoÄŸrafÄ±â€.  
- JWTâ€™yi `localStorage`â€™da tut; `fetch` isteklerine `Authorization: Bearer â€¦` ekle.  
- Navbarâ€™da giriÅŸ/Ã§Ä±kÄ±ÅŸ ve kullanÄ±cÄ±nÄ±n adÄ± + rolÃ¼ gÃ¶ster. Rol bazlÄ± yÃ¶nlendirme (ADMIN sayfalarÄ± korunsun).

4) **Seed (opsiyonel)**  
- `scripts/seed.ts`: admin (`admin@example.com/123456`), seller (`ayse@firma.com/123456`), buyer (`mehmet@firma.com/123456`) oluÅŸtur.

5) **TÃ¼rkÃ§e metinler**  
- TÃ¼m UI/metinler TÃ¼rkÃ§e; hata/success mesajlarÄ± kullanÄ±cÄ± dostu olsun.

BittiÄŸinde: `/register` ve `/login` ile test edilebilir olmalÄ±; `/settings`â€™te bilgiler dÃ¼zenlenebilmeli.
